<div flex id="system-response-free">
    <div>
        <div id="free-graph"></div>
    </div>
    <div stretch default-padding>
        <h2>{{ 'Curve data' | translate }}</h2>

        <div default-padding>
            <md-tab-group>
                <md-tab [label]="'Data Points' | translate">
                    <table class="width-100" fixed>
                        <tbody>
                            <tr *ngFor="let point of test.points" inline-form flex>
                                <td width-33>
                                    <md-input-container class="width-100">
                                        <input mdInput [placeholder]="'Time (seconds)' | translate" [(ngModel)]="point.x" (blur)="plotPoints()" type="number">
                                    </md-input-container>
                                </td>
                                <td width-33>
                                    <md-input-container class="width-100">
                                        <input mdInput [placeholder]="'Value' | translate" [(ngModel)]="point.y" (blur)="plotPoints()" type="number">
                                    </md-input-container>
                                </td>
                                <td width-33>
                                    <button md-raised-button color="warn" (click)="removePoint(point)">{{ 'Remove' | translate }}</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <button md-raised-button color="secondary" (click)="addPoint()">{{ 'Add' | translate }}</button>
                    <br><br>
                </md-tab>
                <md-tab [label]="'Import' | translate">
                    <div>{{ 'Supported formats: CSV and JSON' | translate }}</div>
                    <div>{{ 'JSON: [{"x": 0, "y": 0}, {"x": 1, "y": 1}]' }}</div>
                    <div>{{ csvText | translate }}</div>
                    <br><br>
                    <md-input-container id="import-area">
                        <textarea mdInput [(ngModel)]="importText" placeholder="CSV/JSON"></textarea>
                    </md-input-container>
                    <br>
                    <button md-raised-button color="secondary" (click)="importData()">{{ 'Import' | translate }}</button>
                    <br><br>
                </md-tab>
            </md-tab-group>
        </div>

        <h2>{{ 'Input/Output Configuration' | translate }}</h2>

        <h3>{{ 'Output to control' | translate }}</h3>
        <div default-padding>
            <md-select placeholder="{{ 'Output' | translate }}" class="width-100" [(ngModel)]="test.output">
                <md-option *ngFor="let output of outputs" [value]="output">
                    {{ output }}
                </md-option>
            </md-select>
        </div>

        <h3>{{ 'Inputs to log' | translate }}</h3>
        <div default-padding>
            <div *ngFor="let input of inputs" class="input">
                <md-checkbox [(ngModel)]="input[1]" (change)="updateInputs()">{{ input[0] }}</md-checkbox>
            </div>
        </div>

        <h3>{{ 'Log Rate' | translate }}</h3>
        <div default-padding>
            <md-input-container class="width-100">
                <input mdInput [placeholder]="'Log Rate (seconds)' | translate" [(ngModel)]="test.logRate" type="number">
            </md-input-container>
        </div>

        <h3>{{ 'Fixed outputs' | translate }}</h3>
        <div default-padding>
            <table class="width-100" fixed>
                <tbody>
                    <tr *ngFor="let output of test.fixedOutputs" inline-form>
                        <td width-60>
                            <md-select placeholder="{{ 'Output' | translate }}" class="width-100" [(ngModel)]="output.alias">
                                <md-option *ngFor="let out of outputs" [value]="out">
                                    {{ out }}
                                </md-option>
                            </md-select>
                        </td>
                        <td width-15>
                            <md-input-container class="width-100">
                                <input mdInput [placeholder]="'Value' | translate" [(ngModel)]="output.value" type="number">
                            </md-input-container>
                        </td>
                        <td width-15>
                            <button md-raised-button color="warn" (click)="removeFixedOutput(output)">{{ 'Remove' | translate }}</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button md-raised-button color="secondary" (click)="addFixedOutput()">{{ 'Add' | translate }}</button>
        </div>

        <h3>{{ 'After test outputs' | translate }}</h3>
        <div default-padding>
            <table class="width-100" fixed>
                <tbody>
                    <tr *ngFor="let output of test.afterOutputs" inline-form>
                        <td width-60>
                            <md-select placeholder="{{ 'Output' | translate }}" class="width-100" [(ngModel)]="output.alias">
                                <md-option *ngFor="let out of outputs" [value]="out">
                                    {{ out }}
                                </md-option>
                            </md-select>
                        </td>
                        <td width-15>
                            <md-input-container class="width-100">
                                <input mdInput [placeholder]="'Value' | translate" [(ngModel)]="output.value" type="number">
                            </md-input-container>
                        </td>
                        <td width-15>
                            <button md-raised-button color="warn" (click)="removeAfterOutput(output)">{{ 'Remove' | translate }}</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button md-raised-button color="secondary" (click)="addAfterOutput()">{{ 'Add' | translate }}</button>
        </div>
    </div>
</div>