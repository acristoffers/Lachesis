<div flex id="system-response-wide-pulse">
    <div>
        <div id="wide-pulse-graph"></div>
        <img width="256" src="../imgs/wide-pulse-variables.png">
    </div>
    <div stretch default-padding>
        <h2>{{ 'Curve data' | translate }}</h2>

        <div default-padding>
            <mat-form-field class="width-100">
                <input matInput placeholder="V0" [(ngModel)]="v0" (blur)="plotPoints()" type="number">
            </mat-form-field>
            <mat-form-field class="width-100">
                <input matInput placeholder="âˆ†V1" [(ngModel)]="dv1" (blur)="plotPoints()" type="number">
            </mat-form-field>
            <mat-form-field class="width-100">
                <input matInput placeholder="âˆ†V2" [(ngModel)]="dv2" (blur)="plotPoints()" type="number">
            </mat-form-field>
            <mat-form-field class="width-100">
                <input matInput [placeholder]="'T0 (seconds)' | translate" [(ngModel)]="t0" (blur)="plotPoints()" type="number">
            </mat-form-field>
            <mat-form-field class="width-100">
                <input matInput [placeholder]="'T1 (seconds)' | translate" [(ngModel)]="t1" (blur)="plotPoints()" type="number">
            </mat-form-field>
            <mat-form-field class="width-100">
                <input matInput [placeholder]="'T2 (seconds)' | translate" [(ngModel)]="t2" (blur)="plotPoints()" type="number">
            </mat-form-field>
        </div>

        <h2>{{ 'Input/Output Configuration' | translate }}</h2>

        <h3>{{ 'Output to control' | translate }}</h3>
        <div default-padding>
            <mat-select placeholder="{{ 'Output' | translate }}" class="width-100" [(ngModel)]="test.output">
                <mat-option *ngFor="let output of outputs" [value]="output">
                    {{ output }}
                </mat-option>
            </mat-select>
        </div>

        <h3>{{ 'Inputs to log' | translate }}</h3>
        <div default-padding>
            <div *ngFor="let input of inputs" class="input">
                <mat-checkbox [(ngModel)]="input[1]" (change)="updateInputs()">{{ input[0] }}</mat-checkbox>
            </div>
        </div>

        <h3>{{ 'Log Rate' | translate }}</h3>
        <div default-padding>
            <mat-form-field class="width-100">
                <input matInput [placeholder]="'Log Rate (seconds)' | translate" [(ngModel)]="test.logRate" type="number">
            </mat-form-field>
        </div>

        <h3>{{ 'Fixed outputs' | translate }}</h3>
        <div default-padding>
            <table class="width-100" fixed>
                <tbody>
                    <tr *ngFor="let output of test.fixedOutputs" inline-form>
                        <td width-60>
                            <mat-select placeholder="{{ 'Output' | translate }}" class="width-100" [(ngModel)]="output.alias">
                                <mat-option *ngFor="let out of outputs" [value]="out">
                                    {{ out }}
                                </mat-option>
                            </mat-select>
                        </td>
                        <td width-15>
                            <mat-form-field class="width-100">
                                <input matInput [placeholder]="'Value' | translate" [(ngModel)]="output.value" type="number">
                            </mat-form-field>
                        </td>
                        <td width-15>
                            <button mat-raised-button color="warn" (click)="removeFixedOutput(output)">{{ 'Remove' | translate }}</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button mat-raised-button color="secondary" (click)="addFixedOutput()">{{ 'Add' | translate }}</button>
        </div>

        <h3>{{ 'After test outputs' | translate }}</h3>
        <div default-padding>
            <table class="width-100" fixed>
                <tbody>
                    <tr *ngFor="let output of test.afterOutputs" inline-form>
                        <td width-60>
                            <mat-select placeholder="{{ 'Output' | translate }}" class="width-100" [(ngModel)]="output.alias">
                                <mat-option *ngFor="let out of outputs" [value]="out">
                                    {{ out }}
                                </mat-option>
                            </mat-select>
                        </td>
                        <td width-15>
                            <mat-form-field class="width-100">
                                <input matInput [placeholder]="'Value' | translate" [(ngModel)]="output.value" type="number">
                            </mat-form-field>
                        </td>
                        <td width-15>
                            <button mat-raised-button color="warn" (click)="removeAfterOutput(output)">{{ 'Remove' | translate }}</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button mat-raised-button color="secondary" (click)="addAfterOutput()">{{ 'Add' | translate }}</button>
        </div>
    </div>
</div>
